<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="V1_Board">

	
	<!-- 게시판추가 -->
	<insert id="boardinsert" parameterType="V1_Board" useGeneratedKeys="false">
		INSERT INTO V1_BOARD(BRD_NO,BRD_TITLE, BRD_WRITER, BRD_CONTENT, BRD_HIT, BRD_DATE) 
		VALUES
		(SEQ_V1_BOARD_NO.NEXTVAL, #{brd_title},#{brd_writer},
		#{brd_content},#{brd_hit},  SYSDATE)
	</insert>


	<!--  마지막 번호용 -->
	<select id="boardno" resultType="int">
	SELECT LAST_NUMBER  FROM USER_SEQUENCES WHERE SEQUENCE_NAME=UPPER('SEQ_V1_BOARD_NO')
	</select>
	
	<!-- 게시판출력용 -->
	<select id="boardlist" resultType="V1_BOARD" >
	 SELECT * FROM V1_BOARD ORDER BY BRD_NO DESC
	</select>
	
	
	<!-- 게시판글보기 -->
	<select id="boardlistview" parameterType="int" resultType="V1_Board">
	 SELECT * FROM V1_BOARD WHERE BRD_NO=#{no}
	</select>
	
	<!-- 게시판글수정 -->
	<update id="boardlistupdate" parameterType="V1_Board" >
	 UPDATE V1_BOARD SET BRD_TITLE=#{brd_title}, BRD_WRITER=#{brd_writer},BRD_CONTENT=#{brd_content}
	 WHERE BRD_NO=#{brd_no}
	</update>
	
	<!-- 게시판조회수증가 -->
	<update id="boardlistuphit" parameterType="int">
	UPDATE V1_BOARD SET BRD_HIT=BRD_HIT+1 WHERE BRD_NO=#{no}
	</update>
	
	<!-- 게시판글삭제 -->
	<delete id="boarddelete" parameterType="int">
	DELETE FROM V1_BOARD WHERE BRD_NO=#{no}
	</delete>
	
	<!-- 게시판이전글 -->
	<select id="boardprevno" parameterType="int" resultType="int">
	 SELECT NVL(MAX(BRD_NO),0) FROM V1_BOARD WHERE BRD_NO <![CDATA[<]]> #{no}
	</select>
	
	<!-- 게시판다음글 -->
	<select id="boardnextno" parameterType="int" resultType="int">
	 SELECT NVL(MIN(BRD_NO),0) FROM V1_BOARD WHERE BRD_NO <![CDATA[>]]> #{no}
	</select>
	
	
</mapper>
