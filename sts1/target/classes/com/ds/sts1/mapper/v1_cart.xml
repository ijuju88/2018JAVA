<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="V1_Cart">

<!-- 장바구니 추가  -->
<insert id="insertcart" parameterType="V1_Cart" useGeneratedKeys="false">
 INSERT INTO V1_CART(CRT_NO, CRT_CNT, CRT_DATE, ITM_NO, MEM_ID) 
		VALUES
		(SEQ_V1_CART_NO.NEXTVAL, #{crt_no}, SYSDATE, #{itm_no}, #{mem_id})
</insert>

<!-- 장바구니 보기 -->
<select id="selectcartlist"  parameterType="String" resultType="V1_Cart">
<!-- SELECT CRT_NO, CRT_CNT, CRT_DATE, ITM_NO, MEM_ID FROM V1_CART 
WHERE MEM_ID=#{id} -->
SELECT I.ITM_NO, I.ITM_NAME, I.ITM_PRICE,
	C.CRT_CNT
	FROM V1_ITEM I, 
	(SELECT ITM_NO, SUM(CRT_CNT) AS CRT_CNT
	FROM V1_CART
	WHERE MEM_ID=#{id}
	GROUP BY  ITM_NO, CRT_CNT)C
	WHERE I.ITM_NO=C.ITM_NO 
</select>

</mapper>